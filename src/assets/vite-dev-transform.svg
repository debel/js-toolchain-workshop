<svg viewBox="0 0 700 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#333" />
    </marker>
  </defs>
  
  <style>
    .title { font-size: 20px; font-weight: bold; fill: #333; }
    .hook { fill: #FFD54F; stroke: #F57C00; stroke-width: 2; }
    .process { fill: #90CAF9; stroke: #1976D2; stroke-width: 2; }
    .tool { fill: #A5D6A7; stroke: #388E3C; stroke-width: 2; }
    .label { font-size: 13px; fill: #333; text-anchor: middle; }
    .small { font-size: 10px; fill: #666; text-anchor: middle; }
  </style>
  
  <text x="350" y="30" class="title" text-anchor="middle">DEV MODE - Phase 2: Module Transform Pipeline</text>
  
  <!-- Request comes in -->
  <rect x="270" y="60" width="160" height="40" rx="5" class="process"/>
  <text x="350" y="85" class="label">HTTP Request</text>
  
  <line x1="350" y1="100" x2="350" y2="125" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Plugin Hook: resolveId -->
  <rect x="270" y="130" width="160" height="40" rx="5" class="hook"/>
  <text x="350" y="155" class="label" font-weight="bold">ðŸ”Œ resolveId</text>
  
  <line x1="350" y1="170" x2="350" y2="190" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Resolve the module -->
  <rect x="270" y="195" width="160" height="50" rx="5" class="process"/>
  <text x="350" y="215" class="label">Resolve Module Path</text>
  <text x="350" y="230" class="small">Handle aliases, node_modules</text>
  
  <line x1="350" y1="245" x2="350" y2="265" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Plugin Hook: load -->
  <rect x="270" y="270" width="160" height="40" rx="5" class="hook"/>
  <text x="350" y="295" class="label" font-weight="bold">ðŸ”Œ load</text>
  
  <line x1="350" y1="310" x2="350" y2="330" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Load from filesystem -->
  <rect x="270" y="335" width="160" height="45" rx="5" class="process"/>
  <text x="350" y="355" class="label">Load File Content</text>
  <text x="350" y="370" class="small">Read from disk or cache</text>
  
  <line x1="350" y1="380" x2="350" y2="400" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Plugin Hook: transform -->
  <rect x="270" y="405" width="160" height="40" rx="5" class="hook"/>
  <text x="350" y="430" class="label" font-weight="bold">ðŸ”Œ transform</text>
  
  <line x1="350" y1="445" x2="350" y2="465" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- esbuild transform -->
  <rect x="270" y="470" width="160" height="50" rx="5" class="tool"/>
  <text x="350" y="490" class="label" font-weight="bold">âš¡ esbuild</text>
  <text x="350" y="505" class="small">TSâ†’JS, JSXâ†’JS, minify</text>
  
  <line x1="350" y1="520" x2="350" y2="540" stroke="#333" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Return ESM -->
  <ellipse cx="350" cy="565" rx="90" ry="25" fill="#81C784" stroke="#2E7D32" stroke-width="2"/>
  <text x="350" y="572" class="label">Return ESM Module</text>
  
  <!-- Side: Example file types -->
  <rect x="480" y="130" width="190" height="280" rx="5" fill="#FFF3E0" stroke="#FF9800" stroke-width="2"/>
  <text x="575" y="155" style="font-size: 14px; font-weight: bold; fill: #333; text-anchor: middle;">File Type Handling</text>
  
  <text x="490" y="180" style="font-size: 11px; fill: #666; font-weight: bold;">.ts, .tsx, .jsx:</text>
  <text x="495" y="195" style="font-size: 10px; fill: #666;">â†’ esbuild transforms</text>
  
  <text x="490" y="220" style="font-size: 11px; fill: #666; font-weight: bold;">.vue, .svelte:</text>
  <text x="495" y="235" style="font-size: 10px; fill: #666;">â†’ framework plugin</text>
  
  <text x="490" y="260" style="font-size: 11px; fill: #666; font-weight: bold;">.css, .scss:</text>
  <text x="495" y="275" style="font-size: 10px; fill: #666;">â†’ PostCSS</text>
  <text x="495" y="288" style="font-size: 10px; fill: #666;">â†’ Return as JS module</text>
  
  <text x="490" y="313" style="font-size: 11px; fill: #666; font-weight: bold;">.json:</text>
  <text x="495" y="328" style="font-size: 10px; fill: #666;">â†’ Parse & export</text>
  
  <text x="490" y="353" style="font-size: 11px; fill: #666; font-weight: bold;">Images, fonts:</text>
  <text x="495" y="368" style="font-size: 10px; fill: #666;">â†’ Return URL/base64</text>
  
  <text x="490" y="393" style="font-size: 11px; fill: #666; font-weight: bold;">Source Maps:</text>
  <text x="495" y="408" style="font-size: 10px; fill: #666;">â†’ Generated inline</text>
  
  <!-- Legend -->
  <rect x="20" y="470" width="150" height="100" rx="5" fill="#F5F5F5" stroke="#999" stroke-width="1"/>
  <text x="95" y="490" style="font-size: 12px; font-weight: bold; fill: #333; text-anchor: middle;">Legend</text>
  <rect x="30" y="500" width="40" height="18" class="hook"/>
  <text x="75" y="512" style="font-size: 10px; fill: #333;">Plugin Hook</text>
  <rect x="30" y="523" width="40" height="18" class="process"/>
  <text x="75" y="535" style="font-size: 10px; fill: #333;">Process</text>
  <rect x="30" y="546" width="40" height="18" class="tool"/>
  <text x="75" y="558" style="font-size: 10px; fill: #333;">Tool Used</text>
</svg>
