<svg viewBox="0 0 700 600" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#eceae5" />
    </marker>
  </defs>
  
  <style>
    .title { font-size: 20px; font-weight: bold; fill: #eceae5; }
    .hook { fill: #FFD54F; stroke: #F57C00; stroke-width: 2; }
    .process { fill: #90CAF9; stroke: #1976D2; stroke-width: 2; }
    .tool { fill: #A5D6A7; stroke: #388E3C; stroke-width: 2; }
    .label { font-size: 13px; fill: #333; text-anchor: middle; }
    .small { font-size: 10px; fill: #666; text-anchor: middle; }
  </style>
  
  <text x="350" y="30" class="title" text-anchor="middle">PRODUCTION - Phase 1: Build Initialization</text>
  
  <!-- Start -->
  <ellipse cx="350" cy="70" rx="70" ry="25" fill="#81C784" stroke="#2E7D32" stroke-width="2"/>
  <text x="350" y="77" class="label" font-weight="bold">vite build</text>
  
  <line x1="350" y1="95" x2="350" y2="120" stroke="#eceae5" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Load config -->
  <rect x="270" y="125" width="160" height="45" rx="5" class="process"/>
  <text x="350" y="145" class="label">Load Config</text>
  <text x="350" y="160" class="small">vite.config.js + build mode</text>
  
  <line x1="350" y1="170" x2="350" y2="195" stroke="#eceae5" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Plugin Hook: config -->
  <rect x="270" y="200" width="160" height="40" rx="5" class="hook"/>
  <text x="350" y="225" class="label" font-weight="bold">ðŸ”Œ config</text>
  
  <line x1="350" y1="240" x2="350" y2="260" stroke="#eceae5" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Plugin Hook: configResolved -->
  <rect x="270" y="265" width="160" height="40" rx="5" class="hook"/>
  <text x="350" y="290" class="label" font-weight="bold">ðŸ”Œ configResolved</text>
  
  <line x1="350" y1="305" x2="350" y2="325" stroke="#eceae5" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Plugin Hook: options -->
  <rect x="270" y="330" width="160" height="40" rx="5" class="hook"/>
  <text x="350" y="355" class="label" font-weight="bold">ðŸ”Œ options</text>
  
  <line x1="350" y1="370" x2="350" y2="390" stroke="#eceae5" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Scan dependencies -->
  <rect x="270" y="395" width="160" height="50" rx="5" class="process"/>
  <text x="350" y="415" class="label">Scan Dependencies</text>
  <text x="350" y="430" class="small">Find node_modules imports</text>
  
  <line x1="350" y1="445" x2="350" y2="465" stroke="#eceae5" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Tool: esbuild pre-bundle -->
  <rect x="270" y="470" width="160" height="50" rx="5" class="tool"/>
  <text x="350" y="490" class="label" font-weight="bold">âš¡ esbuild</text>
  <text x="350" y="505" class="small">Pre-bundle dependencies</text>
  
  <line x1="350" y1="520" x2="350" y2="545" stroke="#eceae5" stroke-width="2" marker-end="url(#arrow)"/>
  
  <!-- Cache -->
  <rect x="270" y="550" width="160" height="40" rx="5" fill="#FFF9C4" stroke="#F9A825" stroke-width="2"/>
  <text x="350" y="575" class="label">node_modules/.vite/</text>
  
  <!-- Side panel -->
  <rect x="470" y="200" width="210" height="240" rx="5" fill="#FFF3E0" stroke="#FF9800" stroke-width="2"/>
  <text x="575" y="225" style="font-size: 14px; font-weight: bold; fill: #333; text-anchor: middle;">Pre-bundling Goals</text>
  
  <text x="480" y="250" style="font-size: 11px; fill: #666; font-weight: bold;">1. Convert to ESM</text>
  <text x="485" y="265" style="font-size: 10px; fill: #666;">CJS/UMD â†’ ESM modules</text>
  
  <text x="480" y="290" style="font-size: 11px; fill: #666; font-weight: bold;">2. Reduce Requests</text>
  <text x="485" y="305" style="font-size: 10px; fill: #666;">Bundle deps with many</text>
  <text x="485" y="318" style="font-size: 10px; fill: #666;">internal modules</text>
  
  <text x="480" y="343" style="font-size: 11px; fill: #666; font-weight: bold;">3. Performance</text>
  <text x="485" y="358" style="font-size: 10px; fill: #666;">esbuild is 10-100x faster</text>
  <text x="485" y="371" style="font-size: 10px; fill: #666;">than JS-based bundlers</text>
  
  <text x="480" y="396" style="font-size: 11px; fill: #666; font-weight: bold;">4. Caching</text>
  <text x="485" y="411" style="font-size: 10px; fill: #666;">HTTP cache headers +</text>
  <text x="485" y="424" style="font-size: 10px; fill: #666;">filesystem cache</text>
  
  <!-- Legend -->
  <rect x="20" y="470" width="150" height="100" rx="5" fill="#333" stroke="#999" stroke-width="1"/>
  <text x="95" y="490" style="font-size: 12px; font-weight: bold; fill: #eceae5; text-anchor: middle;">Legend</text>
  <rect x="30" y="500" width="40" height="18" class="hook"/>
  <text x="75" y="512" style="font-size: 10px; fill: #eceae5;">Plugin Hook</text>
  <rect x="30" y="523" width="40" height="18" class="process"/>
  <text x="75" y="535" style="font-size: 10px; fill: #eceae5;">Process</text>
  <rect x="30" y="546" width="40" height="18" class="tool"/>
  <text x="75" y="558" style="font-size: 10px; fill: #eceae5;">Tool Used</text>
</svg>
